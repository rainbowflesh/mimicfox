@import url("./icons/icons.css");

/* colors */
:root:not([lwtheme]),
/* `--newtab-background-color-secondary used` to differentiate between a dark
 * private window and private window with the 'Dark' theme enabled.
 * May not be the most reliable method, but works for now up to FF 123. */
:root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]:not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
  /* Toolbars */
  --lwt-accent-color: light-dark(#cecece, #1c1c1c) !important;
  --lwt-accent-color-inactive: light-dark(#e8e8e8, #2e2e2e) !important;
  --lwt-text-color: light-dark(#000, #fff) !important;
  --lwt-text-color-inactive: light-dark(#3a3a3a, #cbcbcb) !important;
  --tab-selected-textcolor: light-dark(#000, #fff) !important;
  --tab-selected-textcolor-inactive: light-dark(#3e3e3e, #cbcbcb) !important;
  --tab-selected-bgcolor: var(--toolbar-bgcolor) !important;
  --tab-attention-icon-color: light-dark(#0078d4, #93d0ff) !important;
  --toolbar-bgcolor: light-dark(#f7f7f7, #3b3b3b) !important;
  --toolbar-non-lwt-bgcolor: var(--toolbar-bgcolor) !important;
  --toolbar-color: light-dark(#000, #fff) !important;
  --toolbarbutton-icon-fill: var(--toolbar-color) !important;
  --toolbarbutton-icon-fill-attention: light-dark(#0078d4, #4c98d1) !important;
  --toolbarseparator-color: color-mix(in srgb, currentColor 25%, transparent) !important;
  --chrome-content-separator-color: light-dark(#bfbfbf, #686868) !important;
  --newtab-background-color: light-dark(#f7f7f7, #252525) !important;
  --tabpanel-background-color: var(--newtab-background-color, var(--toolbar-bgcolor, transparent)) !important;
  /* Toolbar button overlays */
  --toolbarbutton-hover-background: color-mix(in srgb, currentColor 8%, transparent) !important;
  --toolbarbutton-active-background: color-mix(in srgb, currentColor 13.5%, transparent) !important;
  /* Tab audio indicator overlay icon */
  --tab-icon-overlay-fill: var(--toolbar-color) !important;
  --tab-icon-overlay-stroke: var(--toolbar-bgcolor) !important;
  /* URL bar */
  --toolbar-field-background-color: light-dark(#fff, #2b2b2b) !important;
  --toolbar-field-color: light-dark(#000, #fff) !important;
  --toolbar-field-border-color: transparent !important;
  --toolbar-field-focus-background-color: var(--toolbar-field-background-color) !important;
  --toolbar-field-focus-color: var(--toolbar-field-color) !important;
  --toolbar-field-focus-border-color: light-dark(#0055d780, #63ade5) !important;
  --urlbar-icon-fill-opacity: 0.58 !important;
  --urlbar-box-bgcolor: light-dark(rgb(0 0 0 / 0.09), rgb(255 255 255 / 0.11)) !important;
  --urlbar-box-hover-bgcolor: light-dark(rgb(0 0 0 / 0.09), rgb(255 255 255 / 0.11)) !important;
  --urlbar-box-active-bgcolor: light-dark(rgb(0 0 0 / 0.22), rgb(255 255 255 / 0.28)) !important;
  --urlbar-box-focus-bgcolor: var(--urlbar-box-hover-bgcolor) !important;
  /* URL bar suggestions */
  --link-color: light-dark(#0078d4, #75b6e8) !important;
  --uc-urlbarView-accent-color: light-dark(#1a6397, #75b6e8) !important;
  --urlbarView-highlight-background: light-dark(#f2f2f2, #383838) !important;
  --urlbarView-highlight-color: light-dark(#000, #fff) !important;
  --urlbarView-hover-background: light-dark(#e5e5e5, #444444) !important;
  --urlbarView-separator-color: light-dark(#efefef, #5f5f5f) !important;
  /* Menus/panels */
  --arrowpanel-background: light-dark(#fff, #4a4a4a) !important;
  --arrowpanel-color: light-dark(#1c1c1c, #fff) !important;
  --arrowpanel-border-color: light-dark(#fff, #636363) !important;
  --arrowpanel-dimmed: light-dark(#565656, #565656) !important;
  --arrowpanel-dimmed-further: light-dark(#707070, #707070) !important;
  --panel-separator-color: light-dark(#dadada, #636363) !important;
  --panel-description-color: light-dark(#000a, #fffb) !important;
  --panel-disabled-color: light-dark(#9e9e9e, #b9b9b9) !important;
  --panel-item-hover-bgcolor: light-dark(#eee, #646464) !important;
  --panel-item-active-bgcolor: light-dark(#ddd, #747474) !important;
  --panel-banner-item-update-supported-bgcolor: light-dark(#188038, #81c995) !important;
  /* Primary button */
  --button-primary-bgcolor: light-dark(#0078d4, #006cbe) !important;
  --button-primary-color: light-dark(#fff, #fff) !important;
  --button-primary-hover-bgcolor: light-dark(#006bbd, #1c7cc5) !important;
  --button-primary-active-bgcolor: light-dark(#0060aa, #3289cb) !important;
  /* Secondary button */
  --button-bgcolor: light-dark(#efefef, #5c5c5c) !important;
  --button-color: light-dark(#000, #fff) !important;
  --button-hover-bgcolor: light-dark(#d5d5d5, #6e6e6e) !important;
  --button-active-bgcolor: light-dark(#c0c0c0, #7c7c7c) !important;
  /* Text input field, e.g. bookmarks editor */
  --focus-outline-color: light-dark(#0055d780, #63ade5) !important;
  --input-bgcolor: light-dark(#fff, #4a4a4a) !important;
  --input-color: light-dark(#2b2b2b, #fff) !important;
  --input-border-color: light-dark(#bebebe, #808080) !important;
  --error-text-color: light-dark(#ff9aa2, #ff9aa2) !important;
  --input-error-border-color: light-dark(#ff848a, #ff848a) !important;
  /* Side bar colours. */
  --sidebar-background-color: light-dark(#f7f7f7, #3b3b3b) !important;
  --sidebar-text-color: light-dark(#000, #fff) !important;
  --sidebar-border-color: light-dark(#bfbfbf, #686868) !important;

  /* ::::: Dialog theme ::::: */
  & #window-modal-dialog::backdrop {
    /* Overlay when dialog is shown. */
    background-color: rgb(20 20 20 / 0.2) !important;
  }

  &[dialogroot] {
    /* Dialog */
    --in-content-page-background: var(--arrowpanel-background) !important;
    --in-content-page-color: var(--arrowpanel-color) !important;
    /* Primary button */
    --in-content-primary-button-text-color: var(--button-primary-color) !important;
    --in-content-primary-button-background: var(--button-primary-bgcolor) !important;
    --in-content-primary-button-background-hover: var(--button-primary-hover-bgcolor) !important;
    --in-content-primary-button-background-active: var(--button-primary-active-bgcolor) !important;
    /* Secondary button */
    --in-content-button-text-color: var(--button-color) !important;
    --in-content-button-background: var(--button-bgcolor) !important;
    --in-content-button-background-hover: var(--button-hover-bgcolor) !important;
    --in-content-button-background-active: var(--button-active-bgcolor) !important;
    /* Text input */
    --in-content-box-background: var(--input-bgcolor) !important;
    --in-content-box-border-color: var(--input-border-color) !important;
  }

  accent-color: var(--button-primary-bgcolor) !important;
}

/*
  MARK: Linux / GTK csd
*/
@media (-moz-gtk-csd-available) {
  :root:not([lwtheme]),
    /* `--newtab-background-color-secondary used` to differentiate between a dark
   * private window and private window with the 'Dark' theme enabled.
   * May not be the most reliable method, but works for now up to FF 123. */
    :root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]:not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
    /* Used for mixing colours differently in light/dark themes. */
    --uc-tint: light-dark(black, white);
    /* Colour adjusted for readability. */
    --uc-accent-adjusted: light-dark(
      color-mix(in oklch, AccentColor 92%, black),
      color-mix(in oklch, AccentColor 60%, white)
    );
    /* Toolbars */
    --lwt-accent-color: light-dark(color-mix(in srgb, ActiveCaption 90%, black), ActiveCaption) !important;
    --lwt-accent-color-inactive: light-dark(color-mix(in srgb, InactiveCaption 94%, black), InactiveCaption) !important;
    --lwt-text-color: CaptionText !important;
    --lwt-text-color-inactive: color-mix(in srgb, CaptionText 65%, transparent) !important;
    --tab-selected-textcolor: var(--toolbar-color) !important;
    --tab-selected-textcolor-inactive: color-mix(in srgb, var(--toolbar-color) 65%, transparent) !important;
    --tab-selected-bgcolor: var(--toolbar-bgcolor) !important;
    --tab-attention-icon-color: var(--uc-accent-adjusted) !important;
    --toolbar-bgcolor: light-dark(-moz-dialog, color-mix(in srgb, -moz-dialog 92%, white)) !important;
    --toolbar-color: -moz-dialogtext !important;
    --toolbarbutton-icon-fill-attention: var(--uc-accent-adjusted) !important;
    --chrome-content-separator-color: color-mix(in srgb, currentColor 17%, var(--toolbar-bgcolor)) !important;
    --newtab-background-color: light-dark(-moz-dialog, color-mix(in srgb, -moz-dialog 82%, black)) !important;
    /* URL bar */
    --toolbar-field-background-color: light-dark(Field, color-mix(in srgb, Field 96%, -moz-dialogtext)) !important;
    --toolbar-field-color: FieldText !important;
    --toolbar-field-focus-border-color: light-dark(
      color-mix(in srgb, var(--focus-outline-color) 50%, transparent),
      var(--focus-outline-color)
    ) !important;
    --urlbar-box-bgcolor: var(--button-bgcolor) !important;
    --urlbar-box-hover-bgcolor: var(--button-hover-bgcolor) !important;
    --urlbar-box-active-bgcolor: var(--button-active-bgcolor) !important;
    /* URL bar suggestions. */
    --link-color: var(--uc-accent-adjusted) !important;
    --uc-urlbarView-accent-color: var(--uc-accent-adjusted) !important;
    --urlbarView-highlight-background: var(--panel-item-hover-bgcolor) !important;
    --urlbarView-highlight-color: var(--toolbar-field-color) !important;
    --urlbarView-hover-background: var(--panel-item-active-bgcolor) !important;
    --urlbarView-separator-color: var(--panel-separator-color) !important;
    /* Menus/panels */
    --arrowpanel-background: Field !important;
    --arrowpanel-color: FieldText !important;
    --arrowpanel-border-color: light-dark(transparent, var(--panel-separator-color)) !important;
    --arrowpanel-dimmed: color-mix(in srgb, currentColor 17%, transparent) !important;
    --arrowpanel-dimmed-further: color-mix(in srgb, currentColor 30%, transparent) !important;
    --panel-separator-color: color-mix(in srgb, currentColor 17%, var(--arrowpanel-background)) !important;
    --panel-description-color: GrayText !important;
    --panel-disabled-color: GrayText !important;
    --panel-item-hover-bgcolor: color-mix(in srgb, currentColor 8%, transparent) !important;
    --panel-item-active-bgcolor: color-mix(in srgb, currentColor 13%, transparent) !important;
    /* Primary button */
    --button-primary-bgcolor: AccentColor !important;
    --button-primary-color: AccentColorText !important;
    --button-primary-hover-bgcolor: color-mix(in srgb, var(--uc-tint) 10%, var(--button-primary-bgcolor)) !important;
    --button-primary-active-bgcolor: color-mix(in srgb, var(--uc-tint) 20%, var(--button-primary-bgcolor)) !important;
    /* Secondary button */
    --button-bgcolor: color-mix(in srgb, currentColor 10%, transparent) !important;
    --button-color: currentColor !important;
    --button-hover-bgcolor: color-mix(in srgb, currentColor 14%, transparent) !important;
    --button-active-bgcolor: color-mix(in srgb, currentColor 20%, transparent) !important;
    /* Text input field, e.g. bookmarks editor. */
    --focus-outline-color: var(--uc-accent-adjusted) !important;
    --input-bgcolor: var(--arrowpanel-background) !important;
    --input-color: var(--arrowpanel-color) !important;
    --input-border-color: color-mix(in srgb, currentColor 35%, var(--arrowpanel-background)) !important;
    /* Sidebar */
    --sidebar-background-color: var(--toolbar-bgcolor) !important;
    --sidebar-text-color: var(--toolbar-color) !important;
    --sidebar-border-color: var(--chrome-content-separator-color) !important;
  }

  /* Use the same sidebar splitter style as other platforms. */
  .sidebar-splitter {
    border: 0 solid var(--sidebar-border-color) !important;
    border-inline-end-width: 1px !important;
    width: 4px !important;
    background-color: transparent !important;
    margin-inline-start: -4px !important;
  }
}

@-moz-document url-prefix(about:) {
  :root {
    --in-content-page-color: light-dark(#252525, #fff) !important;
    --in-content-page-background: light-dark(#f7f7f7, #252525) !important;
    --in-content-deemphasized-text: light-dark(#666, #bbb) !important;
    --in-content-box-background: light-dark(#fff, #333) !important;
    --in-content-box-background-odd: light-dark(rgb(0 0 0 / 0.05), rgb(255 255 255 / 0.05)) !important;
    --in-content-box-info-background: light-dark(#f7f7f7, rgb(255 255 255 / 0.15)) !important;
    --in-content-icon-color: light-dark(#666, #fff) !important;
    --in-content-accent-color: light-dark(#006cbe, #75b6e8) !important;
    --in-content-accent-color-active: light-dark(#1683d8, #4c98d1) !important;
    --in-content-border-hover: light-dark(rgb(0 0 0 / 0.5), rgb(255 255 255 / 0.3)) !important;
    --in-content-border-invalid: var(--red-50) !important;
    --in-content-border-color: light-dark(#bebebe, rgb(255 255 255 / 0.2)) !important;
    --in-content-error-text-color: light-dark(#ff848a, #ff9aa2) !important;
    --in-content-link-color: light-dark(#0078d4, #75b6e8) !important;
    --in-content-link-color-hover: light-dark(#006cbe, #63ade5) !important;
    --in-content-link-color-active: light-dark(#0749ac, #4c98d1) !important;
    --in-content-link-color-visited: light-dark(#0078d4, #75b6e8) !important;
    --link-color: var(--in-content-link-color) !important;
    --link-color-hover: var(--in-content-link-color-hover) !important;
    --link-color-active: var(--in-content-link-color-active) !important;
    --link-color-visited: var(--in-content-link-color-visited) !important;
    --in-content-button-text-color: var(--in-content-text-color) !important;
    --in-content-button-text-color-hover: var(--in-content-text-color) !important;
    --in-content-button-text-color-active: var(--in-content-button-text-color-hover) !important;
    --in-content-button-background: light-dark(#ededed, #3b3b3b) !important;
    --in-content-button-background-hover: light-dark(#e5e5e5, #545454) !important;
    --in-content-button-background-active: light-dark(#d5d5d5, #606060) !important;
    --in-content-primary-button-text-color: light-dark(#fff, #fff) !important;
    --in-content-primary-button-background: light-dark(#0061e0, #006cbe) !important;
    --in-content-primary-button-background-hover: light-dark(#0250bb, #0078d4) !important;
    --in-content-primary-button-background-active: light-dark(#053e94, #005ca3) !important;
    --color-accent-primary: light-dark(#0078d4, #006cbe) !important;
    --color-accent-primary-hover: light-dark(#006cbe, #0078d4) !important;
    --color-accent-primary-active: light-dark(#0749ac, #005ca3) !important;
    --in-content-danger-button-background: light-dark(#df4951, #e12424) !important;
    --in-content-danger-button-background-hover: light-dark(#ea656c, #f94343) !important;
    --in-content-danger-button-background-active: light-dark(#bb353c, #aa1e1e) !important;
    --in-content-focus-outline-color: light-dark(rgb(0 85 215 / 0.5), #63ade5) !important;
    --focus-outline-color: var(--in-content-focus-outline-color) !important;
    --in-content-table-background: light-dark(#f7f7f7, #252525) !important;
    --in-content-text-color: var(--in-content-page-color) !important;
    --border-interactive-color: light-dark(#929292, #858585) !important;
    scrollbar-color: light-dark(rgb(37 37 37 / 0.4), rgb(255 255 255 / 0.4)) light-dark(#f7f7f7, #252525) !important;
  }

  ::selection {
    background-color: light-dark(#0078d4, #93b8e7);
    color: light-dark(#fff, #000);
  }
}

/* Add a shadow when the toolbars move over content, eg. in macOS hovering over
 * the menu bar in fullscreen mode. */
#navigator-toolbox[style*="transform"] {
  box-shadow: 0 -3px 5px 3px light-dark(rgb(0 0 0 / 0.3), rgb(0 0 0 / 0.6)) !important;
}

/*
  MARK: Rounded corners (Rc)
*/
@media -moz-pref("uc.tweak.rounded-corners") {
  /* Since Firefox 120, when the bookmarks bar is set to only open on new tabs,
   * the bookmarks bar overlaps the #browser element. */
  /* Change the element that shifts the browser content to the correct position. */
  #main-window[BookmarksToolbarOverlapsBrowser] .newTabBrowserPanel,
  #main-window[BookmarksToolbarOverlapsBrowser] #sidebar-box {
    padding-top: 0 !important;
    margin-top: 0 !important;
  }

  #main-window[BookmarksToolbarOverlapsBrowser] #browser {
    margin-top: var(--bookmarks-toolbar-overlapping-browser-height);
  }

  /* Make sure that the toolbars are not positioned in-front of the browser
   * element. */
  #main-window[BookmarksToolbarOverlapsBrowser] #navigator-toolbox:not([style*="z-index"]) {
    z-index: auto !important;
  }

  /* Move the browser element in-front of the toolbars when on the new tab page. */
  #main-window:not([BookmarksToolbarOverlapsBrowser]) #browser {
    z-index: 1 !important;
  }

  /*
    MARK: Rc Variables
  */
  #main-window:not([chromehidden~="toolbar"]) {
    --uc-tweak-rounded-corners-padding: 4px;
    --uc-tweak-rounded-corners-radius: 8px;
    --uc-tweak-rounded-corners-shadow: 0 -0.8px 0 0 rgb(0 0 0 / 0.02), 0 0.5px 1px 1px rgb(0 0 0 / 0.06),
      0 1px 1px rgb(0 0 0 / 0.1);
    --browser-frame-bgcolor: var(--toolbar-bgcolor, var(--lwt-accent-color));

    /* Different shadow for higher resolution displays. */
    @media (resolution > 1.8dppx) {
      --uc-tweak-rounded-corners-shadow: 0 0 0.5px 0.5px rgb(0 0 0 / 0.06), 0 0.5px 1.5px rgb(0 0 0 / 0.1);
    }
  }

  /* Hide border below titlebar on macOS, as its titlebar already has a border. */
  @media (-moz-platform: macos) {
    :root[chromehidden~="toolbar"][chromehidden~="location"][chromehidden~="directories"] {
      border-top: none !important;
    }
  }

  /* Disable rounded corners in fullscreen, only if the toolbar is hidden. */
  :root[inFullscreen] #navigator-toolbox[style*="margin-top"] + #browser,
  :root[inDOMFullscreen] #browser {
    --uc-tweak-rounded-corners-padding: 0;
    --uc-tweak-rounded-corners-radius: 0;
    --uc-tweak-rounded-corners-shadow: unset;
  }

  /*
    MARK: Rc Browser
  */
  #tabbrowser-tabbox .browserStack {
    margin-inline: var(--uc-tweak-rounded-corners-padding) !important;
    margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
    border-radius: var(--uc-tweak-rounded-corners-radius) !important;
    box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;
    background-color: var(--tabpanel-background-color) !important;
    position: relative !important;

    /* Use pseudo element overlay to simulate rounded corners, similar to the
     * tab corners, fixes bug with backdrop-filter. */
    &::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      /* Draw toolbar background on the negative corner space */
      box-shadow: var(--uc-tweak-rounded-corners-shadow, 0 0 transparent);
      clip-path: inset(0);
      pointer-events: none;
    }
  }

  /* Prevent status panel corners and shadow from appearing outside the browser. */
  #statuspanel {
    overflow: hidden;
  }

  /*
    MARK: Rc Sidebar
  */
  #sidebar-box {
    margin-inline-start: var(--uc-tweak-rounded-corners-padding) !important;
    margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
    border-radius: var(--uc-tweak-rounded-corners-radius) !important;
    overflow: hidden !important;
    box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;

    &[positionend] {
      margin-inline-start: 0 !important;
      margin-inline-end: var(--uc-tweak-rounded-corners-padding) !important;
    }
  }

  /*
    MARK: Rc Devtools
  */

  /* Devtools window when docked to the left or right. */
  .devtools-toolbox-side-iframe {
    margin-block-end: var(--uc-tweak-rounded-corners-padding) !important;
    border-radius: var(--uc-tweak-rounded-corners-radius) !important;
    overflow: hidden !important;
    box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;

    /* Devtools window when docked to the left. */
    &:first-child {
      margin-inline-start: var(--uc-tweak-rounded-corners-padding) !important;
    }

    /* Devtools window when docked to the right. */
    &:last-child {
      margin-inline-end: var(--uc-tweak-rounded-corners-padding) !important;
    }
  }

  /* Devtools window when docked to the bottom. */
  .devtools-toolbox-bottom-iframe {
    margin: var(--uc-tweak-rounded-corners-padding) !important;
    margin-block-start: 0 !important;
    border-radius: var(--uc-tweak-rounded-corners-radius) !important;
    overflow: hidden !important;
    box-shadow: var(--uc-tweak-rounded-corners-shadow) !important;
  }

  /* Hide devtools splitter. */
  .devtools-side-splitter,
  .devtools-horizontal-splitter {
    background-color: transparent !important;
  }

  /* Responsive design mode. */
  .browserContainer.responsive-mode {
    background-color: transparent !important;

    & .rdm-toolbar {
      margin-inline: var(--uc-tweak-rounded-corners-padding) !important;
      border-top-left-radius: var(--uc-tweak-rounded-corners-radius) !important;
      border-top-right-radius: var(--uc-tweak-rounded-corners-radius) !important;
      width: calc(100% - var(--uc-tweak-rounded-corners-padding) * 2) !important;
    }
  }

  /* Change colour of page when loading */
  #tabbrowser-tabpanels {
    background-color: transparent !important;
  }
}

/* Ensure that dark mode is enabled completely in private browsing mode. */
@media -moz-pref("browser.theme.dark-private-windows") {
  :root[privatebrowsingmode="temporary"],
  :root[privatebrowsingmode="temporary"] #nav-bar,
  :root[privatebrowsingmode="temporary"] #PersonalToolbar {
    --toolbar-color-scheme: dark !important;
    --tab-selected-color-scheme: dark !important;
    color-scheme: dark !important;
  }
}

/* Apply colours to the default 'Auto' theme. */
:root:not([lwtheme]) #navigator-toolbox {
  color: var(--lwt-text-color) !important;

  /* Inactive window background colours. */
  &:-moz-window-inactive {
    background-color: var(--lwt-accent-color-inactive, var(--lwt-accent-color)) !important;
    color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
  }
}

/* Status/link preview panel */
#statuspanel-label {
  background-color: var(--toolbar-field-focus-background-color) !important;
  color: var(--toolbar-field-focus-color) !important;
  border-color: transparent !important;
  box-shadow: 0 2px 5px #0002, 0 0 0 1px light-dark(#0001, #0002) !important;
  border-radius: 0 4px 0 0 !important;

  #statuspanel[mirror] & {
    border-radius: 4px 0 0 0 !important;
  }
}

/*
  MARK: Windows
*/
@media (-moz-platform: windows) {
  /* Colour the text selection background and foreground. */
  ::selection {
    background-color: light-dark(#0078d4, #93b8e7) !important;
    color: light-dark(#fff, #000) !important;
  }

  /* Use accent colour in titlebar when Windows option is enabled. */
  @media (-moz-windows-accent-color-in-titlebar) and -moz-pref("browser.theme.windows.accent-color-in-tabs.enabled") {
    /* Uses :root:root to beat specificity of floating tabs adjustments. */
    :root:root:not([lwtheme]) {
      --lwt-accent-color: ActiveCaption !important;
      --lwt-text-color: CaptionText !important;
      --lwt-accent-color-inactive: InActiveCaption !important;
      --lwt-text-color-inactive: InActiveCaptionText !important;
    }
  }

  .titlebar-button:not(.titlebar-close):hover {
    background-color: color-mix(in srgb, currentColor 11%, transparent) !important;

    &:active {
      background-color: color-mix(in srgb, currentColor 20%, transparent) !important;
    }
  }

  .titlebar-close:hover {
    stroke: white !important;
    background-color: #e81123 !important;

    &:active {
      background-color: #dc5c66 !important;
    }

    toolbar[brighttext] &:active {
      background-color: #971821 !important;
    }
  }
}

/*
  MARK: Preferences page
*/
@-moz-document url-prefix(about:preferences),
url-prefix(about:addons) {
  .category[selected] {
    position: relative !important;
    border-radius: 4px !important;
  }

  .category[selected]:not(:hover, :active) {
    background-color: var(--in-content-button-background) !important;
  }

  .category[selected]::before {
    content: "";
    position: absolute;
    inset-block: 0;
    margin-block: auto;
    height: 24px;
    width: 3px;
    left: 2px;
    background-color: var(--in-content-accent-color);
    border-radius: 3px;
  }

  button.tab-button:hover {
    border-block-color: transparent var(--in-content-box-border-color) !important;
  }

  button.tab-button[selected],
  button.tab-button[selected]:hover {
    border-block-color: transparent currentColor !important;
  }

  .toggle-button {
    --toggle-dot-margin: 4px !important;
    --toggle-width: 40px !important;
    --toggle-height: 20px !important;
    --toggle-background-color: transparent !important;
    --toggle-dot-background-color: var(--in-content-page-color) !important;
    --toggle-dot-background-color-on-pressed: #fff !important;
    --toggle-dot-transform-x: calc(
      var(--toggle-width) - 2 * var(--toggle-dot-margin) - 2 * var(--toggle-border-width) - var(--toggle-dot-width)
    ) !important;
  }
}

/* Edge-Frfox - popup.css */

/*
  MARK: Variables
*/
:root {
  --panel-subview-body-padding: 2px 0 !important;
  --arrowpanel-border-radius: 8px !important;
  --arrowpanel-menuitem-border-radius: 4px !important;
  --arrowpanel-menuitem-margin: var(--uc-arrowpanel-menuitem-margin-block) var(--uc-arrowpanel-menuitem-margin-inline) !important;
  --arrowpanel-menuitem-padding-block: 6px !important;
  --arrowpanel-menuitem-padding-inline: 10px !important;
  --uc-arrowpanel-menuicon-margin-inline: 14px;
  --uc-arrowpanel-menuitem-margin-inline: 4px;
  --uc-arrowpanel-menuitem-margin-block: 2px;
  --panel-separator-margin-vertical: 2px !important;
  --panel-separator-margin-horizontal: 0 !important;

  --uc-panel-zoom-button-padding: 8px;
  --uc-panel-zoom-button-inline-padding: 9px;
  --uc-panel-zoom-padding-block: calc(
    var(--panel-separator-margin-vertical) + var(--uc-arrowpanel-menuitem-margin-block)
  );

  --uc-autocomplete-panel-menuitem-margin: 4px;
  --uc-autocomplete-panel-menuicon-padding-inline: 14px;
  --uc-autocomplete-panel-separator-margin-vertical: 4px;

  --uc-permission-itemcontainer-padding-block: 8px;
  --uc-permission-item-margin-block: 4px;
  --uc-permission-item-padding-inline: 16px;

  --uc-contextmenu-border-radius: 8px;
  --uc-contextmenu-padding: calc(4px - var(--uc-contextmenu-menuitem-border-width)) 0;
  --uc-contextmenu-menuitem-border-radius: calc(4px + var(--uc-contextmenu-menuitem-border-width));
  --uc-contextmenu-menuitem-padding-block: 6px;
  --uc-contextmenu-menuitem-padding-inline: 10px;
  --uc-contextmenu-menuitem-border-width: 2px;
  --uc-contextmenu-menuicon-margin-inline: 12px;
  --uc-contextmenu-menuitem-margin-inline: calc(4px - var(--uc-contextmenu-menuitem-border-width));
  --uc-contextmenu-menuitem-margin-block: 0px;
  --uc-contextmenu-menuitem-margin: var(--uc-contextmenu-menuitem-margin-block)
    var(--uc-contextmenu-menuitem-margin-inline);
  --uc-contextmenu-separator-vertical: calc(4px - var(--uc-contextmenu-menuitem-border-width));
  --uc-contextmenu-separator-horizontal: 0;
}

/*
  MARK: App menu
*/
.addon-banner-item,
.panel-banner-item {
  margin: 2px 4px 2px !important;
  padding-inline: 4px 12px !important;
  padding-block: var(--arrowpanel-menuitem-padding-block) !important;
  border-radius: var(--arrowpanel-menuitem-border-radius) !important;
}

#appMenu-fxa-label2 label,
#PanelUI-fxa-menu-syncnow-button label {
  margin-block: 0 !important;
}

.widget-overflow-list .toolbarbutton-1:not(.toolbarbutton-combined) > .toolbarbutton-text,
.subviewbutton:not(#appMenu-zoom-controls > .subviewbutton) > .toolbarbutton-icon + .toolbarbutton-text,
#appMenu-fxa-label2 > vbox {
  padding-inline-start: var(--uc-arrowpanel-menuicon-margin-inline) !important;
}

/* special case menuitems with no icons */
#appMenu-zoom-controls > .toolbarbutton-text,
#fxa-manage-account-button > vbox,
#PanelUI-fxa-menu-syncnow-button > hbox {
  padding-inline-start: calc(16px + var(--uc-arrowpanel-menuicon-margin-inline)) !important;
}

.subviewbutton > .toolbarbutton-icon {
  width: 16px !important;
}

/* firefox profile avatar in appmenu */
#appMenu-fxa-label2::before {
  content: "";
  display: flex;
  height: 16px;
  width: 16px;
  background: var(--avatar-image-url) 0/16px;
  scale: 1.25;
  border-radius: 99px;
}

/* zoom controls */
#appMenu-zoom-controls {
  padding-inline: calc(var(--arrowpanel-menuitem-padding-inline) + var(--uc-arrowpanel-menuitem-margin-inline))
    var(--uc-arrowpanel-menuitem-margin-inline) !important;
  padding-block: var(--uc-panel-zoom-padding-block) !important;
  margin: var(--panel-separator-margin-vertical) 0 calc(var(--panel-separator-margin-vertical) * -1) !important;
}

#appMenu-zoom-controls > .subviewbutton {
  padding: var(--uc-panel-zoom-button-padding) var(--uc-panel-zoom-button-inline-padding) !important;
  margin: 0 !important;
}

#appMenu-zoom-controls > #appMenu-zoomReset-button2 {
  padding: var(--uc-panel-zoom-button-padding) calc(var(--uc-panel-zoom-button-padding) / 2) !important;
}

/* #appMenu-zoomReduce-button2, */
#appMenu-zoom-controls > #appMenu-fullscreen-button2 {
  margin-left: calc(
    (var(--panel-separator-margin-vertical) + var(--uc-arrowpanel-menuitem-margin-block)) * 2 + 1px
  ) !important;
}

#appMenu-zoom-controls > #appMenu-fullscreen-button2::before {
  content: "";
  border-inline-start: 1px solid var(--panel-separator-color);
  display: block;
  position: relative;
  height: 32px;
  margin-block: calc(var(--uc-panel-zoom-button-padding) * -1);
  transform: translateX(
    calc(
      var(--uc-panel-zoom-button-inline-padding) * -1 -
        (var(--panel-separator-margin-vertical) + var(--uc-arrowpanel-menuitem-margin-block)) - 1px
    )
  );
}

#appMenu-zoomReset-button2 {
  height: calc(16px + var(--uc-panel-zoom-button-padding) * 2) !important;
  min-height: calc(16px + var(--uc-panel-zoom-button-padding) * 2) !important;
}

#appMenu-zoomReduce-button2:not([disabled], [open], :active):is(:hover),
#appMenu-zoomEnlarge-button2:not([disabled], [open], :active):is(:hover),
#appMenu-fullscreen-button2:not([disabled], [open], :active):is(:hover),
#appMenu-zoomReset-button2:not([disabled], [open], :active):is(:hover) {
  background-color: var(--panel-item-hover-bgcolor) !important;
}

#appMenu-zoomReduce-button2:not([disabled]):is([open], :hover:active),
#appMenu-zoomEnlarge-button2:not([disabled]):is([open], :hover:active),
#appMenu-fullscreen-button2:not([disabled]):is([open], :hover:active),
#appMenu-zoomReset-button2:not([disabled]):is([open], :hover:active) {
  background-color: var(--panel-item-active-bgcolor) !important;
}

#appMenu-zoomReduce-button2 > .toolbarbutton-icon,
#appMenu-zoomEnlarge-button2 > .toolbarbutton-icon {
  fill: currentColor !important;
  stroke: none !important;
}

#appMenu-zoomReset-button2 > .toolbarbutton-text,
#appMenu-fullscreen-button2 > .toolbarbutton-icon {
  background-color: transparent !important;
  padding: 0 !important;
}

.subviewbutton[shortcut]::after {
  opacity: 0.7 !important;
}

#widget-overflow-mainView .panel-subview-body {
  padding-bottom: 0 !important;
}

.PanelUI-subView > .panel-header + toolbarseparator {
  margin-bottom: 0 !important;
}

.PanelUI-subView > .panel-header + toolbarseparator + .panel-subview-body {
  padding-top: var(--panel-separator-margin-vertical) !important;
}

#identity-popup-security-button {
  margin-bottom: var(--panel-separator-margin-vertical) !important;
}

#permission-popup-mainView-panel-header,
#identity-popup-mainView-panel-header,
#protections-popup-mainView-panel-header,
.panel-header {
  min-height: calc((var(--arrowpanel-menuitem-padding-block) + 4px) * 2 + 16px) !important;
}

/* URL bar popup */
.panel-footer > button {
  border-radius: 2px !important;
}

.identity-popup-security-connection > hbox > description {
  margin-inline-start: 0 !important;
}

.identity-popup-security-connection.identity-button {
  margin-inline-end: calc(-1 * (var(--arrowpanel-menuitem-padding-inline) - 10px)) !important;
}

#identity-popup-mainView-panel-header-span,
#permission-popup-mainView-panel-header-span,
#identity-popup-mainView-panel-header label,
#permission-popup-mainView-panel-header label,
#protections-popup-mainView-panel-header-span {
  margin-block: 0 !important;
}

.permission-popup-section {
  padding-block: var(--uc-permission-itemcontainer-padding-block) !important;
}

#permission-popup-permissions-content {
  padding-inline: var(--uc-permission-item-padding-inline) !important;
}

.permission-popup-permission-item,
#permission-popup-storage-access-permission-list-header {
  margin-block: var(--uc-permission-item-margin-block) !important;
}

.permission-popup-permission-label,
.permission-popup-permission-header-label {
  margin-inline-start: var(--uc-arrowpanel-menuicon-margin-inline) !important;
}

#editBookmarkPanel > #editBookmarkHeaderSeparator,
#editBookmarkPanel > .panel-subview-body > #editBookmarkSeparator {
  margin-inline: 0 !important;
}

/* subview */
.panel-header {
  padding: 4px !important;
  padding-top: 4px !important;
}

.panel-header + toolbarseparator,
#identity-popup-mainView-panel-header + toolbarseparator,
#permission-popup-mainView-panel-header + toolbarseparator,
#protections-popup-mainView-panel-header-section + toolbarseparator {
  margin-block-start: 0 !important;
}

.panel-header > .subviewbutton-back {
  margin: 0 !important;
  padding: var(--arrowpanel-menuitem-padding-block) !important;
}

.panel-subview-footer-button {
  margin-bottom: 4px !important;
}

.webextension-popup-browser,
.webextension-popup-stack {
  margin-block-start: calc(var(--panel-separator-margin-vertical) * -0.5) !important;
}

#PlacesToolbar menuitem,
#PlacesToolbar menu,
panelview .toolbarbutton-1,
.subviewbutton,
.widget-overflow-list .toolbarbutton-1 {
  min-height: calc(16px + var(--uc-contextmenu-menuitem-padding-block) * 2) !important;
}

/*
  MARK: Downloads
*/
.downloadTypeIcon {
  height: 16px !important;
  width: 16px !important;
}

.downloadButton {
  min-width: calc(16px + var(--uc-toolbarbutton-inner-inline-padding) * 2) !important;
  height: calc(16px + var(--toolbarbutton-inner-padding) * 2) !important;
  border-radius: var(--toolbarbutton-border-radius) !important;
}

.downloadProgress::-moz-progress-bar,
.downloadProgress > div {
  background-color: var(--toolbarbutton-icon-fill-attention) !important;
}

.downloadMainArea {
  padding-block: 4px !important;
  padding-inline: 12px !important;
  border-radius: 0 !important;
}

#downloadsListBox > richlistitem {
  padding-inline-end: 8px !important;
  border-radius: var(--arrowpanel-menuitem-border-radius) !important;
}

#downloadsListBox,
.downloadsPanelFooterButton {
  margin: var(--arrowpanel-menuitem-margin) !important;
  width: auto !important;
  min-width: auto !important;
}

#downloadsPanel-blockedSubview,
#downloadsPanel-mainView {
  padding: var(--panel-separator-margin-vertical) 0 !important;
}

#emptyDownloads {
  padding: 1.5em 16px 1.7em !important;
}

#downloadsHistory .button-text {
  margin-block: 0 !important;
  margin-inline: 0 !important;
}

.PanelUI-subView .subviewbutton-nav::after,
#PlacesToolbar menu > .menu-right,
.subviewbutton > .menu-right {
  fill-opacity: 1 !important;
}

/*
  MARK: Extensions
*/
/* #region */
.toolbaritem-combined-buttons:is(:not([cui-areatype="toolbar"]), [overflowedItem="true"])
  > toolbarbutton:not(.toolbarbutton-1)[disabled] {
  opacity: 1 !important;
  color: var(--panel-disabled-color) !important;
}

/* Removes space above extensions items. */
#unified-extensions-messages-container {
  margin-block: 0 !important;
}

:root {
  --uei-icon-size: 24px !important;
}

@media -moz-pref("uc.tweak.context-menu.compact-extensions-menu") {
  :root {
    --uei-icon-size: 16px !important;
  }

  /* Hide site access permissions label. */
  .unified-extensions-item-message-deck {
    display: none !important;
  }

  /* Use smaller toolbar extension icon if available. */
  toolbaritem:is([overflowedItem="true"], [cui-areatype="panel"]) > .webextension-browser-action {
    list-style-image: var(--webextension-toolbar-image, var(--webextension-menupanel-image, inherit)) !important;
  }
}

/* Use smaller font-size in extensions menu on Windows. */
@media (-moz-platform: windows) {
  #unified-extensions-panel .toolbarbutton-text {
    font: menu !important;
    font-family: inherit !important;
  }
}

/* Prevent extension labels from using >1 line, adding ellipsis if necessary. */
.unified-extensions-item-contents {
  flex: 1 !important;
  & > .unified-extensions-item-name,
  & > .unified-extensions-item-message-deck > .unified-extensions-item-message {
    max-width: calc(100% - 4px) !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
  }
}

/* Extension item menu button. */
.unified-extensions-item-menu-button {
  padding: 0 !important;
  & > .toolbarbutton-icon {
    border: none !important;
    padding-inline: var(--arrowpanel-menuitem-padding-inline) !important;
    padding-block: var(--arrowpanel-menuitem-padding-block) !important;
    margin-inline-start: var(--uc-arrowpanel-menuitem-margin-inline) !important;
  }
}

/* Add grayscale filter to extensions with no access to current site. */
.unified-extensions-list
  .unified-extensions-item-action-button:has(
    .unified-extensions-item-message[data-l10n-id="origin-controls-state-no-access"]
  )
  .unified-extensions-item-icon {
  filter: grayscale(1) !important;
}

/* Adjust spacing between the extension item's icon and label. */
.unified-extensions-item-name,
.unified-extensions-item-message {
  padding-inline-start: var(--uc-arrowpanel-menuicon-margin-inline) !important;
}

.unified-extensions-item-icon,
.unified-extensions-item .webextension-browser-action > .toolbarbutton-badge-stack {
  margin-inline-end: 0 !important;
}
/* #endregion */

/*
  MARK: Autocomplete
*/
panel[type="autocomplete-richlistbox"] {
  --panel-shadow: none !important;
  --panel-background: var(--arrowpanel-background) !important;
  --panel-color: var(--arrowpanel-color) !important;
  --panel-padding: var(--uc-contextmenu-padding) !important;
  --panel-border-radius: var(--uc-contextmenu-border-radius) !important;
  --panel-border-color: var(--arrowpanel-border-color) !important;

  > .autocomplete-richlistbox {
    background: transparent !important;
    color: inherit !important;
  }

  .autocomplete-richlistitem {
    &[originaltype="loginsFooter"] {
      justify-content: start !important;
      color: inherit !important;
      background-color: transparent !important;
      padding-inline-start: var(--uc-contextmenu-menuitem-padding-inline) !important;
      position: relative !important;
      overflow: visible !important;
      margin-top: calc(var(--uc-contextmenu-separator-vertical) * 2 + 1px) !important;

      /* Separator */
      &::before {
        content: "";
        position: absolute;
        width: calc(100% + var(--uc-contextmenu-menuitem-margin-inline) * 2);
        border-top: 1px solid var(--panel-separator-color);
        top: calc((var(--uc-contextmenu-separator-vertical) + var(--uc-contextmenu-menuitem-border-width)) * -1 - 1px);
        left: calc(var(--uc-contextmenu-menuitem-margin-inline) * -1);
      }
    }

    &:hover {
      background-color: var(--panel-item-hover-bgcolor) !important;
    }

    &[selected] {
      background-color: var(--panel-item-active-bgcolor) !important;
      color: inherit !important;
    }
  }

  .ac-site-icon {
    fill: currentColor !important;
    margin-block: auto !important;
    margin-inline: 0 var(--uc-autocomplete-panel-menuicon-padding-inline) !important;
  }

  .ac-title {
    margin-inline-start: 0 !important;
  }

  .two-line-wrapper {
    padding: 0 !important;
    gap: 0 !important;

    > .labels-wrapper > .line2-label:empty {
      /* Remove padding on empty element. */
      padding-top: 0 !important;
    }
  }
}

#PopupAutoComplete {
  .ac-site-icon {
    display: flex !important;
  }
}

/*
  MARK: Search bar suggestions
*/
#PopupSearchAutoComplete {
  & .search-panel-header {
    padding-block: 2px !important;
    padding-inline: var(--uc-contextmenu-menuitem-padding-inline) !important;
    margin: 0 var(--uc-arrowpanel-menuitem-margin-inline) !important;
    border-radius: var(--arrowpanel-menuitem-border-radius) !important;
  }

  & .autocomplete-richlistitem > .ac-type-icon {
    margin-inline-start: 0 !important;
  }

  /* Search engine selector. */
  & .search-one-offs {
    padding-block: 0 5px !important;

    & #searchbar-one-offs-header-label {
      margin-inline-start: 0 !important;
    }

    & .search-panel-one-offs-container {
      margin-inline: 1px 7px !important;
    }
  }
}

/*
  MARK: Context menu
*/

/* disable context menu when this tweak is applied */
@media not -moz-pref("uc.tweak.revert-context-menu") {
  menupopup:not(.PanelUI-subView),
  menulist > menupopup:not(.PanelUI-subView) > menucaption {
    -moz-window-shadow: none !important;
    background: 0 !important;
    border: 0 !important;
    color: var(--arrowpanel-color) !important;
  }

  .popup-internal-box,
  .menupopup-arrowscrollbox {
    border: 1px solid var(--arrowpanel-border-color) !important;
  }

  /* cut off shadow so it doesn't get in the way of the menubar items */
  menubar menupopup {
    padding: 1px 8px 20px !important;
    margin: -1px -4px -16px !important;
  }

  menupopup {
    --uc-margin: 0 !important;
    --uc-outline-color: #0001;
    --uc-box-shadow: 0 8px 12px #0003, 0 4px 5px #0002, 0 2px 4px #0002;
  }

  @media (prefers-color-scheme: dark) {
    menupopup {
      --uc-outline-color: #0002;
      --uc-box-shadow: 0 8px 12px #0003, 0 4px 5px #0003, 0 2px 4px #0002;
    }
  }

  /* use default shadow for subview menupopup (eg. bookmarks) */
  menupopup.PanelUI-subView {
    --uc-box-shadow: 0 0 0 1px var(--panel-border-color);
    --uc-margin: 1px !important;
    margin-top: -5px !important;
  }

  .menupopup-arrowscrollbox {
    box-shadow: var(--uc-box-shadow) !important;
    outline: 0.5px solid var(--uc-outline-color) !important;
  }

  .popup-internal-box {
    margin: 0 !important;
  }

  .popup-internal-box,
  .menupopup-arrowscrollbox {
    padding: var(--uc-contextmenu-padding) !important;
    border-radius: var(--uc-contextmenu-border-radius) !important;
    color: inherit !important;
  }

  menupopup menu[disabled="true"],
  menupopup menuitem[disabled="true"] {
    color: var(--panel-disabled-color) !important;
    background: none !important;
  }

  menupopup menu:hover:not([disabled="true"]),
  menupopup menuitem:hover:not([disabled="true"]),
  menupopup menu[_moz-menuactive]:not([disabled="true"]),
  menupopup menuitem[_moz-menuactive]:not([disabled="true"]) {
    background-color: var(--panel-item-hover-bgcolor) !important;
    color: inherit !important;
  }

  menupopup menuitem:hover:active:not([disabled="true"]),
  menupopup menu:hover:active:not([disabled="true"]) {
    background-color: var(--panel-item-active-bgcolor) !important;
    color: inherit !important;
  }

  menupopup menuseparator,
  panel menuseparator {
    margin: var(--uc-contextmenu-separator-vertical) 0 !important;
    padding: 0 !important;
    background: none !important;
    border-top: 1px solid var(--panel-separator-color) !important;

    &::before {
      content: unset !important;
    }
  }

  #PlacesToolbar menupopup[placespopup="true"] menuseparator::before {
    display: none !important;
  }

  menupopup menu,
  menupopup menuitem,
  menupopup menucaption,
  panel[type="autocomplete-richlistbox"] richlistitem {
    padding: var(--uc-contextmenu-menuitem-padding-block) var(--uc-contextmenu-menuitem-padding-inline) !important;
    margin: var(--uc-contextmenu-menuitem-margin) !important;
    border-radius: var(--uc-contextmenu-menuitem-border-radius) !important;
    border: var(--uc-contextmenu-menuitem-border-width) solid transparent !important;
    background-clip: padding-box !important;
    min-height: calc(
      16px + (var(--uc-contextmenu-menuitem-padding-block) + var(--uc-contextmenu-menuitem-border-width)) * 2
    ) !important;
  }

  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup
    > menuitem:not(
      .menuitem-iconic,
      [type="checkbox"],
      [type="radio"],
      .in-menulist,
      .in-menulist menuitem,
      .unified-nav-current
    ),
  :not(:not(menubar) > menu, #ContentSelectDropdown)
    > menupopup
    > menu:not(.menu-iconic, [type="checkbox"], [type="radio"], .in-menulist, .in-menulist menu, .unified-nav-current),
  :not(:not(menubar) > menu, #ContentSelectDropdown) > menupopup > menucaption {
    padding-inline-start: calc(
      var(--uc-contextmenu-menuitem-padding-inline) + 16px + var(--uc-contextmenu-menuicon-margin-inline)
    ) !important;
  }

  .menu-iconic-icon {
    margin-block: 0 !important;
    margin-inline-end: 0 !important;
    margin-inline-start: 0 !important;
  }

  menu > .menu-iconic-text,
  menuitem > .menu-iconic-text,
  /* Used for vertical context navigation tweak. */
  #context-navigation > .menuitem-iconic::after {
    padding-inline-start: var(--uc-contextmenu-menuicon-margin-inline) !important;
  }

  .menu-text,
  .menu-iconic-text {
    margin-inline-start: 0 !important;
    padding-block: 0 !important;
  }

  .menu-accel,
  .menu-iconic-accel {
    margin-inline-end: 0 !important;
    padding-block: 0 !important;
    opacity: 0.7 !important;
  }

  .menu-iconic > .menu-iconic-left,
  .menuitem-iconic > .menu-iconic-left {
    padding-inline-end: 0 !important;
    padding-block: 0 !important;
  }

  menuitem:is(.menuitem-iconic:not([data-usercontextid]), [type="checkbox"], [type="radio"], [checked], [selected])
    .menu-iconic-icon {
    -moz-context-properties: fill !important;
    fill: currentColor !important;
  }

  .menu-right,
  .menu-accel-container {
    appearance: none !important;
    margin-inline-end: 0 !important;
    -moz-context-properties: fill;
    fill: currentColor !important;
  }

  menupopup menuitem:is([type="checkbox"], [type="radio"]) .menu-iconic-icon,
  menulist > menupopup > menuitem .menu-iconic-icon,
  menu .menu-right {
    height: 16px !important;
    width: 16px !important;
  }

  menulist > menupopup > menuitem:is([checked="true"], [selected="true"])::before,
  menupopup > menuitem::before,
  menupopup > menu::before,
  menupopup > menuitem::after {
    display: none !important;
  }

  menuitem:is([type="checkbox"], [checked="true"], [type="radio"]) > .menu-iconic-left > .menu-iconic-icon {
    display: flex !important;
  }

  menuitem[checked="true"] > .menu-iconic-left,
  menu > .menu-iconic-left,
  menuitem > .menu-iconic-left {
    margin: 0 !important;
    padding: 0 !important;
  }

  #context-navigation:not([hidden]) {
    padding: 0 !important;
    --menuitem-min-width: calc(16px + var(--uc-contextmenu-menuitem-padding-inline) * 2) !important;
    min-width: calc(4 * var(--menuitem-min-width));
  }

  #context-navigation > .menuitem-iconic > .menu-iconic-left > .menu-iconic-icon {
    width: 16px !important;
    height: 16px !important;
    padding: 0 !important;
  }

  #context-navigation {
    margin-inline: var(--uc-contextmenu-menuitem-margin-inline) !important;
  }

  #context-navigation > .menuitem-iconic {
    justify-content: center !important;
  }

  #context-navigation > .menuitem-iconic {
    margin: 0 !important;
  }

  #context-navigation > .menuitem-iconic {
    flex-grow: 1 !important;
    width: unset !important;
  }

  #context-navigation > .menuitem-iconic[_moz-menuactive="true"] > .menu-iconic-left > .menu-iconic-icon {
    background-color: transparent !important;
  }

  #context-bookmarkpage[starred] .menu-iconic-icon {
    fill: var(
      --lwt-toolbarbutton-icon-fill-attention,
      var(--toolbarbutton-icon-fill-attention, currentColor)
    ) !important;
  }

  @media (not -moz-pref("uc.tweak.smaller-context-menu-text")) and (-moz-platform: windows) {
    .menu-text,
    .menu-iconic-text,
    panel .toolbarbutton-text,
    panel[type="autocomplete-richlistbox"] .ac-title,
    /* Used for vertical context navigation tweak. */
    #context-navigation > .menuitem-iconic::after {
      margin-inline-start: 0 !important;
      margin-block: -3px -1px !important;
      padding-block: 0 !important;
    }

    .menu-text,
    .menu-iconic-text,
    panel .toolbarbutton-text,
    #appMenu-fxa-status2,
    .panel-header,
    panel[type="autocomplete-richlistbox"],
    /* Used for vertical context navigation tweak. */
    #context-navigation > .menuitem-iconic::after {
      font-size: 13.6px !important;
    }
  }
}

/*
  MARK: Dialog box
*/

/* Dialog shadow and outline adjustments. */
.dialogBox:not(.spotlightBox) {
  border-radius: 8px !important;
  outline: 0.5px solid var(--panel-separator-color) !important;
  box-shadow: 0 20px 38px rgb(0 0 0 / 0.23), 0 5px 9px rgb(0 0 0 / 0.22) !important;
}

dialog {
  /* Dialog title. */
  & #titleContainer {
    /* Add larger gap between icon and title text. */
    & .titleIcon {
      padding-inline-end: 8px !important;
    }

    /* Match font style in Edge. */
    & #titleText {
      font-size: 1.18em !important;
      font-weight: 700 !important;
    }

    /* Adjust vertical alignment of title text. */
    @media (-moz-platform: macOS) {
      &:not([noicon]) > #titleCropper {
        translate: 0 calc(-1px - max(0.55 * var(--icon-size) - 0.6em, 0px)) !important;
      }
    }
  }

  /* Input focus style. */
  & input:where([type="email"], [type="tel"], [type="text"], [type="password"], [type="url"], [type="number"]):focus {
    outline: 2px solid var(--in-content-box-border-color) !important;
    outline-offset: -2px !important;
  }
}

/* FF123+ tab preview pop-up.
 * CSS reference: https://searchfox.org/mozilla-central/source/browser/components/tabpreview/tabpreview.css
 * Requires `browser.tabs.cardPreview.enabled` set to `true` */
.tab-preview-container {
  /* background-color: var(--arrowpanel-background) !important; */
  border: 0.5px solid var(--panel-separator-color) !important;
  border-radius: 8.5px !important;

  /* Place thumbnail at the top of the tooltip. */
  display: flex !important;
  flex-direction: column-reverse !important;

  & .tab-preview-uri {
    color: var(--panel-description-color) !important;
  }
}

/* Edge-Frfox - tree.css */

/* Change height of tree items and add rounded corners */
treechildren::-moz-tree-row,
treecol:not([hideheader="true"]),
.tree-columnpicker-button {
  min-height: max(28px, 1.3em) !important;
  border-radius: 2px !important;
}

/* Change the background colour on hover */
@media not (prefers-contrast) {
  treechildren::-moz-tree-row(hover) {
    background-color: var(--toolbarbutton-hover-background) !important;
  }
}

/* Change the background colour when pressed */
treechildren::-moz-tree-row(selected) {
  background-color: var(--toolbarbutton-active-background) !important;
}

/* Change the background colour when focused */
treechildren::-moz-tree-row(selected, focus) {
  background-color: var(--button-primary-bgcolor) !important;
}

treechildren::-moz-tree-row(current, focus) {
  outline: var(--default-focusring);
  outline-color: var(--button-primary-bgcolor) !important;
  outline-offset: calc(-1 * var(--default-focusring-width));
}

treechildren::-moz-tree-image(selected),
treechildren::-moz-tree-twisty(selected),
treechildren::-moz-tree-cell-text(selected) {
  color: inherit !important;
}

treechildren::-moz-tree-image(selected, focus),
treechildren::-moz-tree-twisty(selected, focus),
treechildren::-moz-tree-cell-text(selected, focus) {
  color: var(--button-primary-color) !important;
}

/* Spacing between icon and label */
treechildren::-moz-tree-image {
  margin-inline-end: 8px !important;
}

/* Separator appearance */
treechildren::-moz-tree-separator {
  border-top: 1px solid var(--toolbarseparator-color) !important;
  border-bottom: none !important;
}

/* Change the colour of the drop feedback elements */
treechildren::-moz-tree-cell-text(primary, dropOn) {
  background-color: var(--button-primary-bgcolor) !important;
  color: var(--button-primary-color) !important;
}

treechildren::-moz-tree-drop-feedback {
  background-color: var(--toolbarbutton-icon-fill-attention) !important;
  border-radius: 2px !important;
}

/* Change the appearance for the expandable items */
treechildren::-moz-tree-twisty {
  padding-top: 0 !important;
  padding-inline: 4px !important;
  width: 16px !important;
  list-style-image: url("../icons/arrow-filled-right.svg") !important;
}

treechildren:-moz-locale-dir(rtl)::-moz-tree-twisty(closed) {
  list-style-image: url("../icons/arrow-filled-left.svg") !important;
}

treechildren::-moz-tree-twisty(open) {
  list-style-image: url("../icons/arrow-filled-down.svg") !important;
}

/* Change the identation of child items */
treechildren::-moz-tree-indentation {
  width: 16px !important;
}

/* Edge-Frfox - tweaks.css */

/*
  MARK: Hide tab close button
*/
@media -moz-pref("uc.tweak.hide-tab-close-button") {
  .tabbrowser-tab .tab-close-button {
    visibility: collapse !important;
  }
}

/*
  MARK: Floating tabs
*/
@media -moz-pref("uc.tweak.floating-tabs") {
  --browser-frame-bgcolor: var(--lwt-accent-color);
  &:-moz-window-inactive {
    --browser-frame-bgcolor: var(--lwt-accent-color-inactive, var(--lwt-accent-color));
  }
  :root:not([lwtheme]),
  /* `--newtab-background-color-secondary used` to differentiate between a dark
  * private window and private window with the 'Dark' theme enabled.
  * May not be the most reliable method, but works for now up to FF 123. */
  :root[privatebrowsingmode="temporary"]:where([style*="--lwt-accent-color: rgb(28, 27, 34)"]:not([style*="--newtab-background-color-secondary: rgb(66, 65, 77)"])) {
    --lwt-accent-color: light-dark(#f3f3f3, #202020) !important;
    --lwt-accent-color-inactive: unset !important;
    --toolbar-bgcolor: light-dark(#fff, #3f3f3f) !important;
    --lwt-tab-text: light-dark(#262626, #fff) !important;
    --chrome-content-separator-color: light-dark(#bfbfbf, #535353) !important;
    --lwt-tab-line-color: light-dark(transparent, rgb(255 255 255 / 0.06)) !important;
  }

  /* Uses :root body to avoid affecting other variables by changing
  * --toolbar-color. */
  :root body {
    /* Use tabbar colours for better readability when using custom themes. */
    --toolbar-color: var(--lwt-text-color) !important;
    --toolbarbutton-icon-fill: var(--lwt-text-color) !important;

    &:-moz-window-inactive {
      --toolbar-color: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
      --toolbarbutton-icon-fill: var(--lwt-text-color-inactive, var(--lwt-text-color)) !important;
    }
  }

  @media (-moz-gtk-csd-available) {
    :root:not([lwtheme]) {
      --toolbar-bgcolor: color-mix(in srgb, -moz-dialog 80%, #fff) !important;
      --toolbar-field-background-color: Field !important;
      --lwt-tab-text: -moz-dialogtext !important;
      --lwt-tab-line-color: rgb(255 255 255 / 0.06) !important;
      --lwt-accent-color: var(--toolbox-non-lwt-bgcolor) !important;

      &:-moz-window-inactive {
        --lwt-accent-color: var(--toolbox-non-lwt-bgcolor-inactive) !important;
      }
    }
  }

  /* Shadow for navbar and tabs */
  :root,
  :root .tabbrowser-tab {
    --uc-titlebar-shadow: none;
    --uc-tab-shadow-outline: rgb(0 0 0 / 0.11);
    --uc-tab-shadow: 0 2.5px 3px 1px rgb(0 0 0 / 0.08);

    & [brighttext],
    & [brighttext] .tabbrowser-tab {
      --uc-titlebar-shadow: none;
      --uc-tab-shadow-outline: transparent;
      --uc-tab-shadow: 0 2px 3px rgb(0 0 0 / 0.12);
    }

    & #TabsToolbar {
      --tab-border-radius: 8px !important;
    }
  }

  /* remove toolbar bg */
  #nav-bar,
  #PersonalToolbar {
    background-color: transparent !important;
  }

  /* invert bottom corner radius for tabs */
  .tab-background {
    border-radius: var(--tab-border-radius) !important;
    outline-offset: 0px !important;

    &::before,
    &::after {
      display: none !important;
    }
  }

  .tab-background[selected] {
    border: 1px solid var(--lwt-tab-line-color, var(--lwt-tabs-border-color, transparent)) !important;
    outline: 1px solid var(--uc-tab-shadow-outline) !important;

    /* Fractional scaling adjustments (150%, 175%, etc.) */
    @media (1dppx < resolution < 2dppx) {
      outline-width: 1.5px !important;
    }
  }

  /* move tab shadow behind urlbar */
  .tabbrowser-tab[visuallyselected="true"],
  #nav-bar {
    z-index: 2 !important;
  }

  /* tab shadow adjustments */
  .tabbrowser-tab {
    overflow-clip-margin: 8px !important;
  }
}

/*
  MARK: Hide access key
*/
@media -moz-pref("uc.tweak.context-menu.hide-access-key") {
  :where(menuitem, menu) > :is(.menu-text, .menu-iconic-text)[value]:not([value=""]) {
    &::before {
      /* The default value is -moz-label-content, which takes the data from the
       * value attribute and highlights the character found in the accesskey
       * attribute. This skips that and uses the value attribute directly. */
      content: attr(value) !important;
    }
  }
}

/*
  MARK: Show tab close button
*/
@media -moz-pref("uc.tweak.show-tab-close-button-on-hover") {
  #tabbrowser-tabs[closebuttons="activetab"] .tabbrowser-tab:not([pinned], [selected]):hover .tab-close-button {
    display: flex !important;
  }
}

/*
  MARK: Hide forward button
*/
@media -moz-pref("uc.tweak.hide-forward-button") {
  :root:not([customizing]) #forward-button[disabled] {
    display: none !important;
  }
}

/*  */
/* Edge-Frfox - findbar.css
 * https://github.com/bmFtZQ/edge-frfox */

/*
  MARK: Findbar textbox
*/
@media (max-width: 1000px) {
  .findbar-entire-word .checkbox-label {
    font-size: 0;
    position: relative;
  }

  .findbar-entire-word .checkbox-label::before {
    content: "ab";
    font-size: 14px;
    color: inherit;
    text-decoration: underline overline;
  }
}

@media (max-width: 900px) {
  .findbar-match-diacritics .checkbox-label {
    font-size: 0;
    position: relative;
  }

  .findbar-match-diacritics .checkbox-label::before {
    content: "Aá";
    font-size: 14px;
    color: inherit;
  }
}

@media (max-width: 850px) {
  .findbar-case-sensitive .checkbox-label {
    font-size: 0;
    position: relative;
  }

  .findbar-case-sensitive .checkbox-label::before {
    content: "Aa";
    font-size: 14px;
    color: inherit;
  }
}

@media (max-width: 800px) {
  checkbox[anonid="highlight"] .checkbox-label {
    display: inline-block;
    width: 16px;
    height: 16px;
    background-size: contain;
    background-repeat: no-repeat;
    text-indent: -9999px;
    overflow: hidden;
    background-image: var(--icon-highlight);
  }
  @media (prefers-color-scheme: dark) {
    checkbox[anonid="highlight"] .checkbox-label {
      background-image: var(--icon-highlight-dark);
    }
  }
}

/*  */

.findbar-textbox {
  border: 0 !important;
  border-radius: var(--toolbarbutton-border-radius) !important;
  background-color: var(--toolbar-field-background-color) !important;

  /* Add shadow when in light mode with no theme applied, like the URL bar. */
  :root:not([lwtheme]) & {
    box-shadow: 0 0 4px light-dark(rgb(0 0 0 / 0.1), transparent) !important;
  }

  &:focus {
    outline-width: 2px !important;
    outline-offset: -1px !important;
  }

  &[status="notfound"] {
    outline: 2px solid var(--input-error-border-color, #e22850) !important;
    outline-offset: -1px !important;
  }
}

/* Prevent focus outline from being cut off on the findbar textbox. */
.findbar-container {
  overflow-inline: visible !important;

  /* Add ability to drag window from empty space in the findbar. */
  &::after {
    content: "";
    flex: 1;
    align-self: stretch;
    -moz-window-dragging: drag;
    display: none !important;
  }
}

/*
  MARK: Findbar buttons
*/
.findbar-find-previous,
.findbar-find-next,
findbar .close-icon {
  border-radius: var(--toolbarbutton-border-radius) !important;

  &:not([disabled]):hover {
    background-color: var(--toolbarbutton-hover-background, rgb(190 190 190 / 0.2)) !important;

    &:active {
      background-color: var(--toolbarbutton-active-background, rgb(190 190 190 / 0.4)) !important;
    }
  }
}

/*
  MARK: Rounded corners
*/
@media -moz-pref("uc.tweak.rounded-corners") {
  findbar {
    border: none !important;
    margin-bottom: var(--uc-tweak-rounded-corners-padding, 0px) !important;
    background-color: transparent !important;
    padding-inline: var(--uc-tweak-rounded-corners-padding, 0px) !important;

    &[hidden] {
      margin-bottom: calc(var(--uc-tweak-rounded-corners-padding, 0px) - 40px) !important;
    }
  }
}

/*  */
/* Edge-Frfox - navbar.css
 * https://github.com/bmFtZQ/edge-frfox */

/*
  MARK: Variables
*/
:root {
  --toolbarbutton-border-radius: 4px !important;
  --toolbarbutton-inner-padding: 7px !important;
  --uc-toolbarbutton-inner-inline-padding: 12px !important;
  --toolbarbutton-outer-padding: 2px !important;
  --tabs-navbar-shadow-size: 0px !important;
}

#nav-bar {
  border-top: none !important;
}

/*
  MARK: Toolbar buttons
*/
#nav-bar .toolbarbutton-1 > .toolbarbutton-icon {
  width: calc(2 * var(--uc-toolbarbutton-inner-inline-padding) + 16px) !important;
}

#nav-bar .toolbarbutton-1 > .toolbarbutton-icon,
#nav-bar .toolbarbutton-1 > .toolbarbutton-text,
#nav-bar .toolbarbutton-1 > .toolbarbutton-badge-stack {
  padding-inline: var(--uc-toolbarbutton-inner-inline-padding) !important;
}

/* move reload/stop icon to middle of button */
#reload-button > .toolbarbutton-animatable-box,
#stop-button > .toolbarbutton-animatable-box {
  top: calc(50% - 10px) !important;
}

#nav-bar-customization-target :where(#reload-button, #stop-button) > .toolbarbutton-icon {
  padding: var(--toolbarbutton-inner-padding) var(--uc-toolbarbutton-inner-inline-padding) !important;
}

toolbar .toolbaritem-combined-buttons {
  margin-inline: var(--toolbarbutton-outer-padding) !important;
}

/*
  MARK: Account button
*/
.browser-toolbar #fxa-toolbar-menu-button,
.browser-toolbar #fxa-toolbar-menu-button > .toolbarbutton-badge-stack,
#fxa-avatar-image {
  border-radius: 99px !important;
}

.browser-toolbar #fxa-toolbar-menu-button > .toolbarbutton-badge-stack {
  padding: var(--toolbarbutton-inner-padding) !important;
  margin-inline: calc(var(--uc-toolbarbutton-inner-inline-padding) - var(--toolbarbutton-inner-padding)) !important;
}

#TabsToolbar #fxa-toolbar-menu-button > .toolbarbutton-badge-stack {
  margin-inline: calc(
    var(--uc-toolbarbutton-inner-inline-padding) - (var(--toolbarbutton-inner-padding) + 2px)
  ) !important;
}

#fxa-toolbar-menu-button {
  display: flex !important;
}

#widget-overflow-list > #fxa-toolbar-menu-button #fxa-avatar-image {
  scale: 1.25 !important;
}

.customization-target > #fxa-toolbar-menu-button #fxa-avatar-image {
  scale: 1.5 !important;
}

/*
  MARK: Button transitions
*/
@media not (prefers-reduced-motion) {
  .toolbarbutton-1 > .toolbarbutton-icon,
  .toolbarbutton-1 > .toolbarbutton-text,
  .toolbarbutton-1 > .toolbarbutton-badge-stack,
  :not(.panel-subview-body > toolbaritem) > .bookmark-item:not(menu, menuitem),
  .urlbar-page-action,
  .identity-box-button,
  #tracking-protection-icon-container,
  panel button,
  panel menulist,
  .titlebar-button {
    transition: background-color 0.25s ease !important;
  }

  .toolbarbutton-1:not([disabled="true"]):is([open], [checked], :hover:active) > .toolbarbutton-icon,
  .toolbarbutton-1:not([disabled="true"]):is([open], [checked], :hover:active) > .toolbarbutton-text,
  .toolbarbutton-1:not([disabled="true"]):is([open], [checked], :hover:active) > .toolbarbutton-badge-stack,
  :not(.panel-subview-body > toolbaritem)
    > .bookmark-item:not(menu, menuitem):not([disabled="true"]):is([open], [checked], :hover:active),
  .urlbar-page-action:not([disabled="true"]):is([open], [checked], :hover:active),
  .identity-box-button:not([disabled="true"]):is([open], [checked], :hover:active),
  #tracking-protection-icon-container:not([disabled="true"]):is([open], [checked], :hover:active),
  panel button:not([disabled="true"]):is([open], [checked], :hover:active),
  panel menulist:not([disabled="true"]):is([open], [checked], :hover:active),
  .titlebar-button:not([disabled="true"]):hover:active {
    transition-duration: 0s !important;
  }
}

/*  */
/* Edge-Frfox - personalbar.css
 * https://github.com/bmFtZQ/edge-frfox */

/*
  MARK: Variables
*/
:root {
  --bookmark-block-padding: 6px !important;
  --bookmark-inline-padding: 6px !important;
  --bookmark-block-margin: 2px !important;
  --bookmark-inline-margin: 2px !important;
  --uc-bookmark-toolbar-padding-bottom: 2px;
  --bookmarks-toolbar-overlapping-browser-height: calc(
    var(--uc-bookmark-toolbar-padding-bottom) + 16px + (var(--bookmark-block-margin) + var(--bookmark-block-padding)) *
      2
  ) !important;
}

#PersonalToolbar {
  padding-bottom: var(--uc-bookmark-toolbar-padding-bottom) !important;
}

/*
  MARK: Bookmark items
*/
#personal-toolbar-empty-description,
#PersonalToolbar .toolbarbutton-1,
toolbarbutton.bookmark-item:not(.subviewbutton) {
  margin-block: var(--bookmark-block-margin) !important;
  margin-inline: var(--bookmark-inline-margin) !important;
  padding-block: var(--bookmark-block-padding) !important;
  padding-inline: var(--bookmark-inline-padding) !important;
  font-size: 12px !important;

  /* Adjust vertical label position on Windows */
  @media (-moz-platform: windows) {
    & .toolbarbutton-text {
      margin-block: -1px 0 !important;
    }
  }
}

#PersonalToolbar .toolbarbutton-1 {
  padding: 0 !important;
}

/* Spacing between icon and label for bookmarks bar items */
#managed-bookmarks > .toolbarbutton-icon,
#bookmarks-toolbar-placeholder > .toolbarbutton-icon,
#PlacesToolbarItems > .bookmark-item > .toolbarbutton-icon[label]:not([label=""]),
#OtherBookmarks.bookmark-item[container] > .toolbarbutton-icon {
  margin-inline-end: 8px !important;
}

/* Sizing for bookmarks bar icons */
#PersonalToolbar .toolbarbutton-1 > .toolbarbutton-icon {
  width: calc(2 * var(--bookmark-block-padding) + 16px) !important;
  height: calc(2 * var(--bookmark-block-padding) + 16px) !important;
  padding: var(--bookmark-block-padding) !important;
}

/*
  MARK: Separators
*/
#PlacesToolbarItems > toolbarseparator {
  padding-inline: calc(3px - var(--bookmark-inline-margin)) !important;
  align-items: center !important;

  &::before {
    content: "";
    border-inline-start: 1px solid var(--toolbarseparator-color) !important;
    height: 16px !important;
    border-image: none !important;
  }

  /* Fractional scaling adjustments (150%, 175%, etc.) */
  @media (1dppx < resolution < 2dppx) {
    &::before {
      border-inline-start-width: 1.5px !important;
    }
  }
}

/* Left and Right padding of bookmarks bar */
#PersonalToolbar {
  padding-inline: calc(var(--toolbar-start-end-padding) - 2px) calc(var(--toolbar-start-end-padding) + 4px) !important;
}

/*  */
/* Edge-Frfox - tabbar.css
 * https://github.com/bmFtZQ/edge-frfox */

/*
  MARK: Variables
*/
@media not -moz-pref("uc.tweak.floating-tabs") {
  :root {
    /* Extra space at the top of the window. */
    --uc-tab-top-margin: 8px !important;
  }
}
